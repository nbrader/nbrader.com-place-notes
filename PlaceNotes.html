<html>
<head>
    <style>
        body {
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="elm-main"></div>
    <script src="PlaceNotes.min.js"></script>
    <script>
        var app = Elm.Main.init({
            node: document.getElementById('elm-main')
        });

        // Fix coordinate calculations for both mouse and touch events
        // We need coordinates relative to the workspace, not the clicked element
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                var workspace = document.querySelector('[style*="flex: 1"]');
                if (workspace) {
                    // Intercept mouse events and add workspace-relative coordinates
                    ['mousedown', 'mousemove'].forEach(function(eventType) {
                        workspace.addEventListener(eventType, function(e) {
                            var rect = workspace.getBoundingClientRect();
                            // Add custom properties with workspace-relative coordinates
                            e.workspaceX = e.clientX - rect.left;
                            e.workspaceY = e.clientY - rect.top;
                        }, { capture: true });
                    });

                    // Intercept touch events and add workspace-relative coordinates
                    ['touchstart', 'touchmove'].forEach(function(eventType) {
                        workspace.addEventListener(eventType, function(e) {
                            if (e.touches && e.touches[0]) {
                                var rect = workspace.getBoundingClientRect();
                                var touch = e.touches[0];
                                // Add custom properties with workspace-relative coordinates
                                touch.workspaceX = touch.clientX - rect.left;
                                touch.workspaceY = touch.clientY - rect.top;
                            }
                        }, { passive: false, capture: true });
                    });
                }
            }, 100);
        });
    </script>
</body>
</html>
